<!DOCTYPE html>
<title>BeanBag</title>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=no;"/>
<meta name="apple-mobile-web-app-capable" content="yes"/>
<style type="text/css">
html, body {
	position: fixed;
	top: 0;
	left: 0;
	width: 100%;
	height: 100%;
	background: #333;
}

body {
	background-color: #333;
	background-position: center;
	background-size: cover;
	background-image: url(bliss.jpg);
	margin: 0;
	-webkit-touch-callout: none;
	-webkit-user-select: none;
	-khtml-user-select: none;
	-moz-user-select: none;
	-ms-user-select: none;
	user-select: none;
	touch-action: none;
}

#c {
	position: fixed;
	top: 0;
	left: 0;
}
</style>
<script id="shader-vs" type="x-shader/x-vertex">
	#ifdef GL_ES
	precision highp float;
	#endif

	uniform vec4 uTransform;
	uniform vec2 uViewport;
	attribute vec2 aTexCoord;
	varying vec2 vTexCoord;

	void main(void) {
		vTexCoord = aTexCoord;
		float angle = uTransform.w;
		mat2 transform = mat2(cos(angle), sin(angle), -sin(angle), cos(angle)) * uTransform.z;
		vec2 screen = uTransform.xy + (aTexCoord * 2.0 - 1.0) * (256.0 / 2.0) * transform;
		gl_Position = vec4(screen.x / uViewport.x * 2.0 - 1.0, screen.y / uViewport.y * -2.0 + 1.0, 0.0, 1.0);
	}
</script>
<script id="shader-fs" type="x-shader/x-fragment">
	#ifdef GL_ES
	precision highp float;
	#endif

	uniform sampler2D uTexture;
	uniform vec3 uColor;
	varying vec2 vTexCoord;

	void main(void) {
		vec3 texColor = texture2D(uTexture, vTexCoord).xyz;
		if (texColor.z == 0.0)
			discard;
		gl_FragColor = vec4(uColor * texColor.x + texColor.y, texColor.z);
	}
</script>
<script src="beanbag2.js" defer></script>
<canvas id="c"></canvas>
